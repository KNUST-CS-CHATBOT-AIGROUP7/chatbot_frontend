

{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    

    <!-- <script src="https://cdn.jsdelivr.net/npm/framer-motion@11.0.8/dist/framer-motion.dev.min.js"></script> -->
    <link rel="stylesheet" href="{% static '/assets/styles.css' %}" />
    {% comment %} <script src="{% static '/assets/index.js' %}"></script> {% endcomment %}
    <title>CS Chatbot</title>
  </head>
  <body>
    <div class=" bg-white dark: flex justify-center items-start">
      <!-- left -->
      <div class="max-[785px]:hidden bg-blue-400 w-[20%] h-[100vh] overflow-y-hidden text-white">
        <!-- sidebar content -->

        <!-- logo -->
        <div class="flex justify-center items-center mt-4 gap-2 text-white">
          <img src="{%static '\assets\images\logo.png' %}" class="w-10 h-10" alt="" />
          <h1>CS Chatbot</h1>
        </div>

        <!-- FAQ -->
        <div>
          <center>
            <h1 class="text-xl font-medium mt-10 mb-7">
              FAQ
            </h1>

            <!-- sections -->
            <div class="flex flex-col justify-start">
              <!-- lectures -->
              <div class="">
                <h1 class=" mt-6 mb-2 font-bold flex justify-left ml-7">Lecturer</h1>
                <button
                  class="border px-12 py-1 rounded bg-white text-black faq hover:bg-blue-700 hover:text-white text-sm"
                >
                  CSS President
                </button>
                <br />
                <button
                  class="border px-10 py-1 mt-3 rounded bg-white text-black faq hover:bg-blue-700 hover:text-white text-sm"
                >
                  CS4 Course-Rep
                </button>
              </div>

              <!-- students -->
              <div class="">
                <h1 class="mt-6 mb-2 font-bold flex justify-left ml-7">Fresher</h1>
                <button
                  class="border px-6 py-1 rounded bg-white text-black faq hover:bg-blue-700 hover:text-white text-sm"
                >
                  CS Conference Room
                </button>
                <br />
                <button
                  class="border px-9 py-1 mt-3 rounded bg-white text-black faq hover:bg-blue-700 hover:text-white text-sm"
                >
                  Department Office
                </button>
              </div>

              <!-- students2 -->
              <div class="">
                <h1 class="mt-6 mb-2 font-bold flex justify-left ml-7">Student</h1>
                <button
                  class="border px-14 py-1 rounded bg-white text-black faq hover:bg-blue-700 hover:text-white text-sm"
                >
                  Exam Officer
                </button>
                <br />
                <button
                  class="border px-12 py-1 mt-3 rounded bg-white text-black faq hover:bg-blue-700 hover:text-white text-sm"
                  class="border p-5 px-10 rounded-xl hover:text-white hover:bg-blue-700 faq"

                >
                  Year-4 Courses
                </button>
              </div>
            </div>
          </center>
        </div>
      </div>

      <!--  right -->
      <div class="w-[80%]">
        <!-- chat content -->

        <!-- water mark -->
        <div class="flex justify-center">
          <div class="absolute bottom-[22%]">
            <img
              src="{% static "\assets\images\water-mark.png" %}"
              alt=""
              width="520"
              class="opacity-90"
            />
          </div>
        </div>

        <!-- top logo -->
        <center class="my-4">
          <img src="{% static "\assets\images\logo.png" %}" alt="" />
          <h1 class="text-lg">Computer Science Chatbot</h1>
        </center>

        <!-- content -->
        <div id="chat" class="mx-10"></div>

        <!-- respond -->
        <!-- <div id="response" class="mx-10"></div> -->

        <!-- options -->
        <div id="option" class="flex justify-center items-center">
          <div class="absolute bottom-[7rem]">
            <div class="flex justify-center items-center gap-7 mb-2">
              <button
                class="border p-5 px-10 rounded-xl hover:text-white hover:bg-blue-700 faq"
              >
                What's the full meaning of CSS?
                
           </span>
              </button>
              <button
                class="border p-5 px-10 rounded-xl hover:text-white hover:bg-blue-700 faq"
              >
                What's the full meaning of CSS?
              </button>
            </div>
            <div class="flex justify-center items-center gap-7">
              <button
                class="border p-5 px-10 rounded-xl hover:text-white hover:bg-blue-700 faq"
              >
                What's the full meaning of CSS?
              </button>
              <button
                class="border p-5 px-10 rounded-xl hover:text-white hover:bg-blue-700 faq"
              >
                What's the full meaning of CSS?
              </button>
            </div>
          </div>
        </div>

        <!-- input type -->
        <form action="" method= "POST">
          {% csrf_token %}
        
        <div class=" flex justify-center items-center">
          <div
            class="  border rounded-3xl absolute bottom-[2rem] w-[65%] flex justify-center items-center"
          >
            
              <textarea
              placeholder="Type here ...."
              id="text"
              name="user"
              class="  ml-5 pt-3 w-full -pb-7 resize-none h-[3rem] opacity-95 text"
            ></textarea>
            
              <button name="btnOne" id="enter" value= "submit_btn" type = "submit">
            <i class="fa-regular fa-paper-plane text-2xl pr-4 cursor-pointer"></i></button>
         
          </div>
        </div>
      </form>
      </div>
    </div>

    {% comment %} <script src="index.js"></script> {% endcomment %}
    <script>
      const chat = document.getElementById("chat");
const text = document.getElementById("text");
const enter = document.getElementById("enter");
const options = document.getElementById("option");
const faq = document.querySelectorAll(".faq");

const answer = [
  "Hey, I am the CS Bot how can I help you? 
];

function displayBotMessage(message) {
  const words = message.split(" ");
  let index = 0;

  const AIrespond = document.createElement("span");
  AIrespond.className = "message bot";
  chat.appendChild(AIrespond);

  const timer = setInterval(() => {
    if (index < words.length) {
      AIrespond.textContent += words[index] + " "; // Add space between words
      index++;
      chat.scrollTop = chat.scrollHeight;

    } else {
      clearInterval(timer);
    }
  }, 100); // Adjust the delay here (milliseconds)
}
enter.addEventListener("click", () => {
  options.style.display = "none";
  const userMessage = text.value;
  const userMessageElement = document.createElement("span");
  userMessageElement.className = "message user";
  userMessageElement.textContent = userMessage;
  chat.appendChild(userMessageElement);
  text.value = "";

  // Scroll to the bottom of the chat area
  // chat.scrollTop = chat.scrollHeight;

  let i = 0;
  function displayAnswers() {
    if (i < answer.length) {
      displayBotMessage(answer[i]);
      i++;
      setTimeout(displayAnswers, 100);
    }
  }

  displayAnswers();
});

text.addEventListener("keydown", (e) => {
  if (e.key == "Enter") {
    e.preventDefault();
    options.style.display = "none";
    const userMessage = text.value;
    const userMessageElement = document.createElement("div");
    userMessageElement.className = "message user";
    userMessageElement.textContent = userMessage;
    chat.appendChild(userMessageElement);
    text.value = "";

    // Scroll to the bottom of the chat area
    // chat.scrollTop = chat.scrollHeight;

    let i = 0;
    function displayAnswers() {
      if (i < answer.length) {
        displayBotMessage(answer[i]);
        i++;
        setTimeout(displayAnswers, 100);
      }
    }

    displayAnswers();
  }
});

for (let i = 0; i < faq.length; i++) {
  faq[i].addEventListener("click", (e) => {
    const res = faq[i].innerText;
    options.style.display = "none";
    const userMessageElement = document.createElement("div");
    userMessageElement.className = "message user";
    userMessageElement.textContent = res;
    chat.appendChild(userMessageElement);

    // Scroll to the bottom of the chat area
    // chat.scrollTop = chat.scrollHeight;

    let j = 0;
    function displayAnswers() {
      if (j < answer.length) {
        displayBotMessage(answer[j]);
        j++;
        setTimeout(displayAnswers, 100);
      }
    }

    displayAnswers();
  });
}

    </script>

  </body>
</html>
